<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0"> 
    <title data-i18n="app_title">Flavor Wheel Note | é¢¨å‘³è¼ªç­†è¨˜</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <style>
        /* å®šç¾©å°ˆæ¡ˆç‰¹å®šçš„è«è˜­è¿ªè‰²ç³» */
        :root {
            --color-morandi-1: #cdb7b5; /* èŠ±é¦™/Floral */
            --color-morandi-2: #c6b6a7; /* æ°´æœ/Fruity */
            /* æ›´å¤šé¡è‰²è«‹åœ¨ CSS æˆ– JS ä¸­æ“´å…… */
        }
        /* D3.js å…ƒç´ çš„é€šç”¨æ¨£å¼ */
        .flavor-arc {
            stroke: #fff;
            stroke-width: 1px;
            cursor: pointer;
            transition: opacity 0.2s;
        }
        .flavor-arc:hover {
            opacity: 0.85;
        }
        /* é‡å° Layer 1 (å¤§é¡åˆ¥)ï¼Œæ”¹è®Šæ»‘é¼ æ¸¸æ¨™ï¼Œæš—ç¤ºå…¶ä¸å¯é»æ“Š */
        .flavor-arc.layer-1 {
            cursor: default;
        }
        .flavor-label {
            font-family: sans-serif;
            fill: #fff; /* æ”¹ç‚ºç™½è‰²æ–‡å­— */
            pointer-events: none; /* Don't block clicks on arcs */
            /* text-shadow: 0px 0px 5px rgba(0, 0, 0, 0.8); /* ç§»é™¤æ–‡å­—é™°å½± */
            font-size: 20px; /* è¨­å®šçµ±ä¸€çš„å­—é«”å¤§å°ç‚º 20px */
        }
    </style>
</head>
<body class="bg-gray-50 font-sans">

    <div id="app" class="max-w-screen-2xl mx-auto p-4 md:p-8">

        <header class="mb-6 flex flex-col md:flex-row justify-between items-center">
            <h1 class="text-3xl font-bold text-gray-700" data-i18n="app_title">Flavor Wheel Note</h1>
            <div class="flex space-x-2 mt-4 md:mt-0">
                <div id="drink-switch" class="flex p-1 bg-white rounded-lg shadow">
                    <button data-type="coffee" data-i18n="coffee_button" class="p-2 rounded-md bg-amber-200 text-gray-800 font-semibold transition">â˜• å’–å•¡</button>
                    <button data-type="tea" data-i18n="tea_button" class="p-2 rounded-md text-gray-500 hover:bg-gray-100 transition">ğŸµ èŒ¶</button>
                    <button data-type="luxury" data-i18n="luxury_button" class="p-2 rounded-md text-gray-500 hover:bg-gray-100 transition">ğŸ’ å¥¢è¯</button>
                </div>
                <div id="lang-switch" class="flex p-1 bg-white rounded-lg shadow">
                    <button data-lang="zh" data-i18n="lang_zh_button" class="p-2 rounded-md bg-teal-200 text-gray-800 font-semibold transition">ä¸­</button>
                    <button data-lang="en" data-i18n="lang_en_button" class="p-2 rounded-md text-gray-500 hover:bg-gray-100 transition">EN</button>
                    <button data-lang="jp" data-i18n="lang_jp_button" class="p-2 rounded-md text-gray-500 hover:bg-gray-100 transition">æ—¥</button>
                </div>
                <div id="theme-switch" class="flex p-1 bg-white rounded-lg shadow mr-2">
                    <button data-theme="default" data-i18n="theme_default_button" class="p-2 rounded-md bg-pink-200 text-gray-800 font-semibold transition">ğŸ¨ Default</button>
                    <button data-theme="catppuccin" data-i18n="theme_catppuccin_button" class="p-2 rounded-md text-gray-500 hover:bg-gray-100 transition">ğŸ¨ Catppuccin</button>
                    <button data-theme="gruvbox" data-i18n="theme_gruvbox_button" class="p-2 rounded-md text-gray-500 hover:bg-gray-100 transition">ğŸ¨ Gruvbox</button>
                </div>
                <div id="luxury-theme-switch" class="flex p-1 bg-white rounded-lg shadow mr-2 hidden">
                    <button data-theme="luxury_gold" data-i18n="theme_luxury_gold_button" class="p-2 rounded-md bg-yellow-200 text-gray-800 font-semibold transition">âšœï¸ å¥¢è¯é‡‘</button>
                    <button data-theme="rose_gold" data-i18n="theme_rose_gold_button" class="p-2 rounded-md text-gray-500 hover:bg-gray-100 transition">ğŸŒ¹ ç«ç‘°é‡‘</button>
                    <button data-theme="platinum" data-i18n="theme_platinum_button" class="p-2 rounded-md text-gray-500 hover:bg-gray-100 transition">ğŸ’ é‰‘é‡‘</button>
                </div>
            </div>
        </header>
                
        <main class="grid grid-cols-1 gap-8">
            <div class="relative bg-white rounded-xl shadow-lg flavor-wheel-container">
                <div id="flavor-wheel">
                    </div>
                <div id="center-display" class="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 pointer-events-none text-center w-48">
                    <p id="current-category" class="text-sm text-gray-500"></p> 
                    <p id="current-flavor" class="text-xl font-bold text-gray-800"></p> 
                    <p class="text-xs mt-2 text-gray-400" data-i18n="click_to_select_flavor">é»æ“Šé¸æ“‡é¢¨å‘³</p>
                </div>
            </div>

            <div class="space-y-6">

                <div class="bg-white p-5 rounded-xl shadow-lg">
                    <h2 class="text-xl font-semibold mb-3 text-gray-700" data-i18n="selected_flavors_title">é¸å–é¢¨å‘³åˆ—è¡¨</h2>
                    <div id="selected-flavors" class="min-h-[50px] p-3 border rounded-lg bg-gray-50 space-y-1">
                        <p class="text-sm text-gray-400" data-i18n="no_flavors_selected">å°šæœªé¸å–ä»»ä½•é¢¨å‘³...</p>
                    </div>

                    <h2 class="text-xl font-semibold mt-4 mb-3 text-gray-700" data-i18n="generate_note_title">ç”Ÿæˆç­†è¨˜</h2>
                    
                    <div id="output-mode-switch" class="flex mb-3 p-1 bg-gray-100 rounded-lg">
                        <button data-mode="list" data-i18n="output_mode_list" class="flex-1 p-2 rounded-md bg-lime-200 text-gray-800 text-sm font-medium">1ï¸âƒ£ ç´”é¢¨å‘³æ–‡å­—</button>
                        <button data-mode="note" data-i18n="output_mode_note" class="flex-1 p-2 rounded-md text-gray-500 text-sm hover:bg-white">2ï¸âƒ£ ç¤¾ç¾¤åˆ†äº«æ¨¡å¼</button>
                    </div>

                    <textarea id="output-textarea" rows="6" class="w-full p-3 border rounded-lg resize-none text-sm font-mono" readonly></textarea>

                    <button id="copy-btn" data-i18n="copy_button" class="w-full mt-3 py-2 px-4 bg-green-500 text-white font-bold rounded-lg hover:bg-green-600 transition">ğŸ“‹ è¤‡è£½åˆ°å‰ªè²¼ç°¿</button>
                    <button id="share-btn" data-i18n="share_button" class="w-full mt-2 py-2 px-4 bg-blue-500 text-white font-bold rounded-lg hover:bg-blue-600 transition hidden">ğŸ”— åˆ†äº« (Web Share API)</button>
                </div>
                
                <div class="bg-white p-5 rounded-xl shadow-lg">
                    <h2 class="text-xl font-semibold mb-3 text-gray-700" data-i18n="settings_title">ç­†è¨˜è¨­å®šèˆ‡è‡ªè¨‚é¢¨å‘³</h2>
                    <label class="block mb-2 text-sm font-medium text-gray-700" data-i18n="origin_label">å“å / ç”¢å€ (Origin)</label>
                    <input type="text" id="input-origin" data-i18n-placeholder="origin_placeholder" placeholder="e.g. Ethiopia Yirgacheffe" class="w-full p-2 border rounded-lg mb-4">
                    <h3 class="text-lg font-medium mb-3 text-gray-700 border-t pt-4" data-i18n="add_custom_flavor_heading">æ‰‹å‹•æ–°å¢è‡ªè¨‚é¢¨å‘³</h3>
                    
                    <label class="block mb-2 text-sm font-medium text-gray-700" data-i18n="custom_flavor_name_label">é¢¨å‘³åç¨± (å°‡ç”¨æ–¼ç­†è¨˜)</label>
                    <input type="text" id="custom-flavor-input" data-i18n-placeholder="custom_flavor_name_placeholder" placeholder="e.g. ä¸ƒé‡Œé¦™ã€ä¹å±¤å¡”" class="w-full p-2 border rounded-lg mb-4">
                    
                    <label class="block mb-2 text-sm font-medium text-gray-700" data-i18n="select_category_label">é¸æ“‡é¡åˆ¥ (æ±ºå®šé †åº)</label>
                    <select id="custom-flavor-category" class="w-full p-2 border rounded-lg mb-4">
                        <option value="" data-i18n="select_category_default">-- è«‹é¸æ“‡ Layer 1 å¤§é¡åˆ¥ --</option>
                        </select>
                    
                    <button id="add-custom-flavor-btn" data-i18n="add_custom_flavor_button" class="w-full py-2 bg-indigo-500 text-white font-bold rounded-lg hover:bg-indigo-600 transition disabled:bg-gray-400" disabled>
                        â• æ–°å¢è‡ªè¨‚é¢¨å‘³
                    </button>
                </div>
            </div>
        </main>
        
        <footer class="text-center mt-8 text-xs text-gray-500 max-w-4xl mx-auto">
            <p id="attribution-text" class="leading-relaxed"></p>
        </footer>
        <script src="js/localization.js"></script>
        <script src="js/colorThemes.js"></script> 
        <script src="js/luxuryColorThemes.js"></script>
        <script src="js/flavorWheel.js"></script>
        <script src="js/app.js"></script>
    </div>
</body>
</html>